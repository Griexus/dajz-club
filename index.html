<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DAJZ.CLUB ‚Äî The Jazz Club</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Special+Elite&family=Courier+Prime:ital,wght@0,400;0,700;1,400&family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
  :root {
    --charcoal: #1a1a1f;
    --deep: #0f0f13;
    --midnight: #141420;
    --amber: #e8941a;
    --amber-dim: #c4780f;
    --amber-glow: rgba(232, 148, 26, 0.15);
    --cream: #f0e6c8;
    --cream-dim: #b8a98a;
    --walnut: #2a1a0a;
    --walnut-light: #3d2810;
    --red-vumeter: #e84a1a;
    --green-vumeter: #4ae870;
    --felt: #0d1a0d;
    --glass: rgba(255,255,255,0.03);
    --static: #888;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--deep);
    color: var(--cream);
    font-family: 'Special Elite', cursive;
    overflow-x: hidden;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    user-select: none;
  }

  /* Noise texture overlay */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 1000;
    opacity: 0.4;
  }

  /* ===== HEADER ===== */
  header {
    width: 100%;
    padding: 18px 40px 14px;
    background: linear-gradient(180deg, var(--walnut) 0%, var(--walnut-light) 60%, transparent 100%);
    border-bottom: 2px solid #3a2010;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
  }

  header::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--amber-dim), transparent);
  }

  .logo {
    font-family: 'Bebas Neue', cursive;
    font-size: 2.4rem;
    letter-spacing: 0.12em;
    color: var(--cream);
    text-shadow: 0 0 20px var(--amber), 0 0 40px rgba(232,148,26,0.3);
    line-height: 1;
  }

  .logo span {
    color: var(--amber);
    text-shadow: 0 0 15px var(--amber), 0 0 30px var(--amber);
  }

  .tagline {
    font-family: 'Courier Prime', monospace;
    font-size: 0.65rem;
    color: var(--cream-dim);
    letter-spacing: 0.25em;
    text-transform: uppercase;
    margin-top: 2px;
  }

  .header-right {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  .on-air {
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: 'Courier Prime', monospace;
    font-size: 0.7rem;
    letter-spacing: 0.2em;
    color: var(--cream-dim);
    text-transform: uppercase;
  }

  .on-air-dot {
    width: 10px; height: 10px;
    border-radius: 50%;
    background: var(--red-vumeter);
    box-shadow: 0 0 8px var(--red-vumeter), 0 0 16px rgba(232,74,26,0.5);
    animation: blink 1.4s ease-in-out infinite;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.2; }
  }

  .clock {
    font-family: 'Courier Prime', monospace;
    font-size: 1rem;
    color: var(--amber);
    letter-spacing: 0.1em;
    text-shadow: 0 0 10px var(--amber-dim);
  }

  /* ===== MAIN LAYOUT ===== */
  .main-container {
    display: grid;
    grid-template-columns: 1fr 380px 340px;
    gap: 0;
    width: 100%;
    max-width: 1400px;
    flex: 1;
    padding: 0;
  }

  /* ===== LEFT PANEL ‚Äî STATIONS ===== */
  .stations-panel {
    background: linear-gradient(180deg, #161616 0%, #111114 100%);
    border-right: 1px solid #2a1a0a;
    padding: 20px 0;
    overflow-y: auto;
    max-height: calc(100vh - 180px);
  }

  .stations-panel::-webkit-scrollbar { width: 4px; }
  .stations-panel::-webkit-scrollbar-track { background: transparent; }
  .stations-panel::-webkit-scrollbar-thumb { background: var(--walnut-light); border-radius: 2px; }

  .station-group {
    margin-bottom: 8px;
  }

  .group-label {
    font-family: 'Courier Prime', monospace;
    font-size: 0.6rem;
    letter-spacing: 0.3em;
    color: var(--amber);
    text-transform: uppercase;
    padding: 10px 20px 6px;
    border-bottom: 1px solid rgba(232,148,26,0.15);
    margin-bottom: 4px;
  }

  .station-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 20px;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    border-left: 2px solid transparent;
  }

  .station-item:hover {
    background: rgba(232,148,26,0.06);
    border-left-color: rgba(232,148,26,0.4);
  }

  .station-item.active {
    background: rgba(232,148,26,0.1);
    border-left-color: var(--amber);
  }

  .station-icon {
    font-size: 1rem;
    width: 24px;
    text-align: center;
    flex-shrink: 0;
  }

  .station-info { flex: 1; min-width: 0; }

  .station-name {
    font-family: 'Special Elite', cursive;
    font-size: 0.8rem;
    color: var(--cream);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .station-item.active .station-name { color: var(--amber); }

  .station-desc {
    font-family: 'Courier Prime', monospace;
    font-size: 0.58rem;
    color: var(--cream-dim);
    opacity: 0.7;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .freq-badge {
    font-family: 'Courier Prime', monospace;
    font-size: 0.55rem;
    color: var(--amber-dim);
    opacity: 0.6;
    flex-shrink: 0;
  }

  /* ===== CENTER PANEL ‚Äî PLAYER ===== */
  .player-panel {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: linear-gradient(180deg, #1c1c22 0%, #141418 100%);
    padding: 30px 20px;
    position: relative;
    border-right: 1px solid #2a1a0a;
  }

  /* Vinyl Record */
  .vinyl-container {
    position: relative;
    width: 220px;
    height: 220px;
    margin-bottom: 28px;
  }

  .vinyl-record {
    width: 220px;
    height: 220px;
    border-radius: 50%;
    background:
      radial-gradient(circle at 50% 50%, #222 0%, #222 15%, transparent 15.5%),
      repeating-radial-gradient(circle at 50% 50%, #1a1a1a 0px, #1a1a1a 1px, #111 2px, #111 3px),
      conic-gradient(from 0deg, #161616, #222, #161616, #222, #161616);
    box-shadow:
      0 0 0 3px #333,
      0 0 0 4px #1a1a1a,
      0 4px 30px rgba(0,0,0,0.8),
      0 0 60px rgba(0,0,0,0.5);
    animation: spin 4s linear infinite;
    animation-play-state: paused;
    position: relative;
  }

  .vinyl-record.playing { animation-play-state: running; }

  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .vinyl-label {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 70px; height: 70px;
    border-radius: 50%;
    overflow: hidden;
    z-index: 2;
    box-shadow: 0 2px 10px rgba(0,0,0,0.5);
  }

  .vinyl-label img {
    width: 100%; height: 100%;
    object-fit: cover;
    filter: sepia(0.25) contrast(1.1) brightness(0.85);
    animation: counter-spin 4s linear infinite;
    animation-play-state: paused;
  }

  .vinyl-record.playing + .vinyl-label img { animation-play-state: running; }

  .vinyl-label:not(:has(img)) {
    background: radial-gradient(circle, var(--amber-dim) 0%, #8a4a08 100%);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  @keyframes counter-spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(-360deg); }
  }

  .tonearm {
    position: absolute;
    top: 10px;
    right: -20px;
    width: 100px;
    height: 100px;
    transform-origin: 90% 10%;
    transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .tonearm svg { width: 100%; height: 100%; }

  /* Playback info */
  .now-playing-label {
    font-family: 'Courier Prime', monospace;
    font-size: 0.58rem;
    letter-spacing: 0.3em;
    color: var(--amber);
    text-transform: uppercase;
    margin-bottom: 8px;
    opacity: 0.8;
  }

  .track-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.2rem;
    font-style: italic;
    color: var(--cream);
    text-align: center;
    line-height: 1.2;
    margin-bottom: 4px;
    text-shadow: 0 1px 3px rgba(0,0,0,0.5);
  }

  .track-artist {
    font-family: 'Special Elite', cursive;
    font-size: 0.85rem;
    color: var(--cream-dim);
    text-align: center;
    margin-bottom: 4px;
  }

  .track-year {
    font-family: 'Courier Prime', monospace;
    font-size: 0.65rem;
    color: var(--amber-dim);
    text-align: center;
    margin-bottom: 20px;
    letter-spacing: 0.1em;
  }

  /* Progress bar (radio ‚Äî n√£o clic√°vel) */
  .progress-container {
    width: 100%;
    margin-bottom: 16px;
  }

  .progress-bar {
    width: 100%;
    height: 3px;
    background: rgba(255,255,255,0.08);
    border-radius: 2px;
    position: relative;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--amber-dim), var(--amber));
    border-radius: 2px;
    box-shadow: 0 0 6px var(--amber);
    transition: width 1s linear;
  }

  .time-display {
    display: flex;
    justify-content: space-between;
    margin-top: 4px;
  }

  .time-display span {
    font-family: 'Courier Prime', monospace;
    font-size: 0.6rem;
    color: var(--cream-dim);
    opacity: 0.6;
  }

  /* VU Meters */
  .vu-section {
    display: flex;
    gap: 16px;
    align-items: flex-end;
    margin-bottom: 20px;
    background: rgba(0,0,0,0.3);
    padding: 12px 16px;
    border-radius: 4px;
    border: 1px solid rgba(255,255,255,0.04);
    width: 100%;
    justify-content: center;
  }

  .vu-meter {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
  }

  .vu-label {
    font-family: 'Courier Prime', monospace;
    font-size: 0.5rem;
    color: var(--cream-dim);
    letter-spacing: 0.2em;
    opacity: 0.6;
    text-transform: uppercase;
  }

  .vu-bars {
    display: flex;
    gap: 2px;
    align-items: flex-end;
  }

  .vu-bar {
    width: 5px;
    border-radius: 1px;
    transition: height 0.08s ease;
  }

  .vu-bar.green { background: var(--green-vumeter); box-shadow: 0 0 4px rgba(74,232,112,0.4); }
  .vu-bar.amber { background: var(--amber); box-shadow: 0 0 4px rgba(232,148,26,0.4); }
  .vu-bar.red { background: var(--red-vumeter); box-shadow: 0 0 4px rgba(232,74,26,0.4); }

  .vu-needle-container {
    width: 80px;
    height: 40px;
    position: relative;
    background: #111;
    border: 1px solid #333;
    border-radius: 2px;
    overflow: hidden;
    box-shadow: inset 0 1px 4px rgba(0,0,0,0.8);
  }

  .vu-needle-bg {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 100%;
    background:
      radial-gradient(ellipse 100% 200% at 50% 100%, #1a1a0a 0%, #111 70%);
  }

  .vu-scale {
    position: absolute;
    bottom: 4px; left: 4px; right: 4px;
    height: 30px;
    border-bottom: 1px solid #444;
    border-left: 1px solid #444;
    border-right: 1px solid #444;
    border-radius: 0 0 4px 4px;
  }

  .vu-needle {
    position: absolute;
    bottom: 4px;
    left: 50%;
    width: 1.5px;
    height: 28px;
    background: linear-gradient(to top, #888, #ccc);
    transform-origin: bottom center;
    transform: rotate(-30deg) translateX(-50%);
    transition: transform 0.12s ease;
  }

  .amber-glow-dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--amber);
    box-shadow: 0 0 6px var(--amber), 0 0 12px var(--amber);
    animation: glow-pulse 2s ease-in-out infinite;
    align-self: center;
  }

  @keyframes glow-pulse {
    0%, 100% { opacity: 0.6; box-shadow: 0 0 4px var(--amber); }
    50% { opacity: 1; box-shadow: 0 0 10px var(--amber), 0 0 20px rgba(232,148,26,0.4); }
  }

  /* Crackle control */
  .crackle-section {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 16px;
  }

  .control-row {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .control-label {
    font-family: 'Courier Prime', monospace;
    font-size: 0.6rem;
    color: var(--cream-dim);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    width: 70px;
    flex-shrink: 0;
    opacity: 0.8;
  }

  input[type=range] {
    -webkit-appearance: none;
    flex: 1;
    height: 3px;
    background: rgba(255,255,255,0.1);
    border-radius: 2px;
    outline: none;
    cursor: pointer;
  }

  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px; height: 14px;
    border-radius: 50%;
    background: radial-gradient(circle, #ddd 0%, #888 100%);
    box-shadow: 0 0 4px rgba(0,0,0,0.5), 0 1px 2px rgba(0,0,0,0.8);
    cursor: pointer;
  }

  input[type=range]::-webkit-slider-runnable-track {
    background: linear-gradient(to right, var(--amber), transparent);
    height: 3px;
    border-radius: 2px;
  }

  /* Play button area */
  .play-zone {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 8px;
  }

  .play-btn {
    width: 56px; height: 56px;
    border-radius: 50%;
    background: radial-gradient(circle at 40% 35%, #5a4020, #2a1a08);
    border: 2px solid #5a3a15;
    box-shadow:
      0 4px 12px rgba(0,0,0,0.6),
      0 1px 3px rgba(255,200,100,0.1),
      inset 0 1px 2px rgba(255,200,100,0.15);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
    font-size: 1.2rem;
    color: var(--cream);
  }

  .play-btn:hover {
    box-shadow:
      0 6px 18px rgba(0,0,0,0.7),
      0 0 20px rgba(232,148,26,0.2),
      inset 0 1px 2px rgba(255,200,100,0.2);
    transform: translateY(-1px);
  }

  .play-btn:active { transform: translateY(1px); }

  /* Station name display */
  .current-station-display {
    font-family: 'Courier Prime', monospace;
    font-size: 0.62rem;
    color: var(--amber);
    letter-spacing: 0.2em;
    text-transform: uppercase;
    text-align: center;
    margin-bottom: 20px;
    padding: 5px 12px;
    border: 1px solid rgba(232,148,26,0.2);
    border-radius: 2px;
    background: rgba(232,148,26,0.05);
  }

  /* Tuning transition overlay */
  .tuning-overlay {
    position: absolute;
    inset: 0;
    background: rgba(10,10,14,0.9);
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 12px;
    z-index: 50;
  }

  .tuning-overlay.active { display: flex; }

  .tuning-static {
    font-family: 'Courier Prime', monospace;
    font-size: 0.7rem;
    color: var(--amber);
    letter-spacing: 0.3em;
    animation: static-flicker 0.1s infinite;
  }

  @keyframes static-flicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  .tuning-wave {
    display: flex;
    gap: 3px;
    align-items: center;
    height: 30px;
  }

  .tuning-wave span {
    width: 3px;
    background: var(--amber);
    border-radius: 2px;
    animation: wave 0.3s ease-in-out infinite alternate;
    animation-delay: calc(var(--i) * 0.05s);
  }

  @keyframes wave {
    from { height: 4px; }
    to { height: 28px; }
  }

  /* ===== RIGHT PANEL ‚Äî LINER NOTES ===== */
  .liner-panel {
    background: #0f0f0f;
    padding: 0;
    overflow-y: auto;
    max-height: calc(100vh - 180px);
    display: flex;
    flex-direction: column;
  }

  .liner-panel::-webkit-scrollbar { width: 4px; }
  .liner-panel::-webkit-scrollbar-thumb { background: var(--walnut-light); border-radius: 2px; }

  .liner-header {
    background: var(--walnut);
    padding: 14px 20px;
    border-bottom: 1px solid #3a2010;
    position: sticky;
    top: 0;
    z-index: 10;
  }

  .liner-header-title {
    font-family: 'Courier Prime', monospace;
    font-size: 0.6rem;
    letter-spacing: 0.3em;
    color: var(--amber);
    text-transform: uppercase;
  }

  .liner-card {
    margin: 16px;
    background: #161610;
    border: 1px solid rgba(232,148,26,0.12);
    border-radius: 2px;
    padding: 16px;
    position: relative;
    animation: card-in 0.5s ease;
  }

  @keyframes card-in {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .liner-card::before {
    content: '';
    position: absolute;
    top: -1px; left: 16px; right: 16px;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--amber-dim), transparent);
  }

  /* Tape strip decoration */
  .tape-strip {
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 16px;
    background: rgba(232,148,26,0.3);
    border-radius: 1px;
    border: 1px solid rgba(232,148,26,0.4);
  }

  .fact-category {
    font-family: 'Courier Prime', monospace;
    font-size: 0.55rem;
    letter-spacing: 0.3em;
    color: var(--amber);
    text-transform: uppercase;
    margin-bottom: 8px;
    opacity: 0.8;
  }

  .fact-text {
    font-family: 'Courier Prime', monospace;
    font-size: 0.78rem;
    color: #d2b48c;
    line-height: 1.6;
    font-style: italic;
  }

  .fact-source {
    font-family: 'Courier Prime', monospace;
    font-size: 0.58rem;
    color: var(--cream-dim);
    opacity: 0.5;
    margin-top: 8px;
    text-align: right;
  }

  /* Divider */
  .liner-divider {
    margin: 0 16px;
    border: none;
    border-top: 1px solid rgba(255,255,255,0.04);
  }

  .album-details {
    margin: 16px;
    display: flex;
    gap: 12px;
    align-items: flex-start;
  }

  .album-thumb {
    width: 64px; height: 64px;
    border-radius: 2px;
    object-fit: cover;
    filter: sepia(0.3) contrast(1.1) brightness(0.85);
    border: 3px solid #2a2a1a;
    flex-shrink: 0;
    background: #222;
  }

  .album-text { flex: 1; }

  .album-name {
    font-family: 'Playfair Display', serif;
    font-size: 0.85rem;
    font-style: italic;
    color: var(--cream);
    margin-bottom: 4px;
  }

  .album-meta {
    font-family: 'Courier Prime', monospace;
    font-size: 0.62rem;
    color: var(--cream-dim);
    opacity: 0.7;
    line-height: 1.5;
  }

  /* Waveform visualizer */
  .visualizer-container {
    width: 100%;
    margin: 0 0 12px;
    padding: 0 16px;
  }

  .visualizer-canvas {
    width: 100%;
    height: 50px;
    background: rgba(0,0,0,0.3);
    border-radius: 2px;
  }

  /* Listeners count */
  .listeners-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0 16px 8px;
    padding: 8px 12px;
    background: rgba(232,148,26,0.04);
    border: 1px solid rgba(232,148,26,0.08);
    border-radius: 2px;
  }

  .listeners-dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--green-vumeter);
    box-shadow: 0 0 6px rgba(74,232,112,0.6);
    animation: blink 2s ease infinite;
  }

  .listeners-text {
    font-family: 'Courier Prime', monospace;
    font-size: 0.6rem;
    color: var(--cream-dim);
    opacity: 0.7;
  }

  .listeners-count {
    font-family: 'Courier Prime', monospace;
    font-size: 0.65rem;
    color: var(--green-vumeter);
    margin-left: auto;
  }

  /* ===== DIAL FOOTER ===== */
  .dial-footer {
    width: 100%;
    background: linear-gradient(180deg, var(--walnut-light) 0%, var(--walnut) 100%);
    border-top: 2px solid #3a2010;
    padding: 16px 0 12px;
    position: relative;
  }

  .dial-footer::before {
    content: '';
    position: absolute;
    top: -1px; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--amber-dim), transparent);
  }

  .dial-wrapper {
    position: relative;
    overflow: hidden;
    padding: 0 60px;
  }

  .dial-track {
    display: flex;
    align-items: center;
    gap: 0;
    transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    cursor: grab;
  }

  .dial-track:active { cursor: grabbing; }

  .dial-station {
    flex-shrink: 0;
    width: 120px;
    text-align: center;
    padding: 6px 8px;
    position: relative;
    cursor: pointer;
    transition: all 0.2s;
  }

  .dial-station::after {
    content: '|';
    position: absolute;
    top: 0; right: 0;
    color: rgba(255,255,255,0.1);
    font-size: 0.7rem;
  }

  .dial-station-name {
    font-family: 'Special Elite', cursive;
    font-size: 0.7rem;
    color: var(--cream-dim);
    opacity: 0.5;
    transition: all 0.2s;
  }

  .dial-station.active .dial-station-name {
    color: var(--amber);
    opacity: 1;
    text-shadow: 0 0 8px rgba(232,148,26,0.5);
  }

  .dial-freq {
    font-family: 'Courier Prime', monospace;
    font-size: 0.5rem;
    color: var(--amber-dim);
    opacity: 0.4;
  }

  .dial-station.active .dial-freq { opacity: 0.8; }

  /* Dial needle */
  .dial-needle {
    position: absolute;
    top: 0; bottom: 0;
    left: 50%;
    width: 1px;
    background: var(--amber);
    box-shadow: 0 0 6px var(--amber), 0 0 12px rgba(232,148,26,0.4);
    pointer-events: none;
    z-index: 10;
    transform: translateX(-50%);
  }

  .dial-needle::before {
    content: '‚ñº';
    position: absolute;
    top: -2px;
    left: 50%;
    transform: translateX(-50%);
    color: var(--amber);
    font-size: 0.5rem;
  }

  /* Fade edges */
  .dial-wrapper::before, .dial-wrapper::after {
    content: '';
    position: absolute;
    top: 0; bottom: 0;
    width: 80px;
    z-index: 5;
    pointer-events: none;
  }

  .dial-wrapper::before {
    left: 0;
    background: linear-gradient(to right, var(--walnut-light), transparent);
  }

  .dial-wrapper::after {
    right: 0;
    background: linear-gradient(to left, var(--walnut-light), transparent);
  }

  /* Dial controls */
  .dial-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    padding: 8px 20px 0;
  }

  .dial-btn {
    background: radial-gradient(circle at 40% 35%, #3a2a1a, #1a0f05);
    border: 1px solid #4a3018;
    color: var(--cream-dim);
    padding: 4px 12px;
    font-family: 'Courier Prime', monospace;
    font-size: 0.6rem;
    letter-spacing: 0.2em;
    cursor: pointer;
    border-radius: 2px;
    transition: all 0.15s;
  }

  .dial-btn:hover {
    color: var(--amber);
    border-color: var(--amber-dim);
    box-shadow: 0 0 8px rgba(232,148,26,0.15);
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 1100px) {
    .main-container {
      grid-template-columns: 220px 1fr;
    }
    .liner-panel { display: none; }
  }

  @media (max-width: 700px) {
    .main-container {
      grid-template-columns: 1fr;
    }
    .stations-panel { display: none; }
  }

  /* Canvas visualizer */
  canvas { display: block; }

  /* Typewriter cursor */
  .typewriter::after {
    content: '‚ñã';
    animation: cursor 0.8s step-end infinite;
    color: var(--amber);
  }

  @keyframes cursor {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  .station-loading {
    font-family: 'Courier Prime', monospace;
    font-size: 0.65rem;
    color: var(--amber);
    letter-spacing: 0.2em;
  }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div>
    <div class="logo">DAJZ<span>.</span>CLUB</div>
    <div class="tagline">The Jazz Club ‚Äî Est. 2026</div>
  </div>
  <div class="header-right">
    <div class="on-air"><div class="on-air-dot"></div> On Air</div>
    <div class="clock" id="clock">00:00:00</div>
  </div>
</header>

<!-- MAIN -->
<div class="main-container">

  <!-- LEFT: STATIONS -->
  <div class="stations-panel" id="stationsPanel">

    <div class="station-group">
      <div class="group-label">‚óà The Essentials</div>
      <div class="station-item active" data-station="ivory" onclick="switchStation(this)">
        <div class="station-icon">üéπ</div>
        <div class="station-info">
          <div class="station-name">Ivory Keys</div>
          <div class="station-desc">Piano solo & trios</div>
        </div>
        <div class="freq-badge">88.1</div>
      </div>
      <div class="station-item" data-station="horn" onclick="switchStation(this)">
        <div class="station-icon">üé∫</div>
        <div class="station-info">
          <div class="station-name">The Horn Section</div>
          <div class="station-desc">Trumpet & Saxophone</div>
        </div>
        <div class="freq-badge">90.3</div>
      </div>
      <div class="station-item" data-station="strings" onclick="switchStation(this)">
        <div class="station-icon">üéª</div>
        <div class="station-info">
          <div class="station-name">Deep Strings</div>
          <div class="station-desc">Bass & cello front</div>
        </div>
        <div class="freq-badge">92.7</div>
      </div>
      <div class="station-item" data-station="bigband" onclick="switchStation(this)">
        <div class="station-icon">üé∑</div>
        <div class="station-info">
          <div class="station-name">Big Band Era</div>
          <div class="station-desc">Swing & orchestras</div>
        </div>
        <div class="freq-badge">94.1</div>
      </div>
      <div class="station-item" data-station="vocal" onclick="switchStation(this)">
        <div class="station-icon">üéô</div>
        <div class="station-info">
          <div class="station-name">Vocal Standards</div>
          <div class="station-desc">The great voices</div>
        </div>
        <div class="freq-badge">95.5</div>
      </div>
    </div>

    <div class="station-group">
      <div class="group-label">‚óà Time Travel</div>
      <div class="station-item" data-station="roaring" onclick="switchStation(this)">
        <div class="station-icon">üåÄ</div>
        <div class="station-info">
          <div class="station-name">The Roaring 20s</div>
          <div class="station-desc">New Orleans origins</div>
        </div>
        <div class="freq-badge">97.3</div>
      </div>
      <div class="station-item" data-station="bebop" onclick="switchStation(this)">
        <div class="station-icon">‚ö°</div>
        <div class="station-info">
          <div class="station-name">Bebop Revolution</div>
          <div class="station-desc">Fast, complex, raw</div>
        </div>
        <div class="freq-badge">99.1</div>
      </div>
      <div class="station-item" data-station="kindofblue" onclick="switchStation(this)">
        <div class="station-icon">üåä</div>
        <div class="station-info">
          <div class="station-name">Kind of Blue</div>
          <div class="station-desc">Cool & modal jazz</div>
        </div>
        <div class="freq-badge">101.5</div>
      </div>
      <div class="station-item" data-station="fusion" onclick="switchStation(this)">
        <div class="station-icon">üîå</div>
        <div class="station-info">
          <div class="station-name">Electric Fusion</div>
          <div class="station-desc">70s experimentation</div>
        </div>
        <div class="freq-badge">103.7</div>
      </div>
      <div class="station-item" data-station="modern" onclick="switchStation(this)">
        <div class="station-icon">üîÆ</div>
        <div class="station-info">
          <div class="station-name">Modern Scene</div>
          <div class="station-desc">Contemporary jazz</div>
        </div>
        <div class="freq-badge">105.9</div>
      </div>
    </div>

    <div class="station-group">
      <div class="group-label">‚óà Mood & Atmosphere</div>
      <div class="station-item" data-station="midnight" onclick="switchStation(this)">
        <div class="station-icon">üåô</div>
        <div class="station-info">
          <div class="station-name">Midnight Blue</div>
          <div class="station-desc">Late nights & rain</div>
        </div>
        <div class="freq-badge">107.1</div>
      </div>
      <div class="station-item" data-station="coffee" onclick="switchStation(this)">
        <div class="station-icon">‚òï</div>
        <div class="station-info">
          <div class="station-name">The Coffeehouse</div>
          <div class="station-desc">Focus & flow</div>
        </div>
        <div class="freq-badge">108.3</div>
      </div>
      <div class="station-item" data-station="spike" onclick="switchStation(this)">
        <div class="station-icon">üî•</div>
        <div class="station-info">
          <div class="station-name">Spike It Up</div>
          <div class="station-desc">High energy hard bop</div>
        </div>
        <div class="freq-badge">89.7</div>
      </div>
      <div class="station-item" data-station="brunch" onclick="switchStation(this)">
        <div class="station-icon">‚òÄÔ∏è</div>
        <div class="station-info">
          <div class="station-name">Sunday Brunch</div>
          <div class="station-desc">Easy & sunny</div>
        </div>
        <div class="freq-badge">91.3</div>
      </div>
      <div class="station-item" data-station="cellar" onclick="switchStation(this)">
        <div class="station-icon">üï≥</div>
        <div class="station-info">
          <div class="station-name">Underground Cellar</div>
          <div class="station-desc">Avant-garde & free</div>
        </div>
        <div class="freq-badge">93.5</div>
      </div>
    </div>

    <div class="station-group">
      <div class="group-label">‚óà Special Curations</div>
      <div class="station-item" data-station="bossa" onclick="switchStation(this)">
        <div class="station-icon">üå¥</div>
        <div class="station-info">
          <div class="station-name">Bossa & Beyond</div>
          <div class="station-desc">Jazz meets samba</div>
        </div>
        <div class="freq-badge">96.5</div>
      </div>
      <div class="station-item" data-station="bluenote" onclick="switchStation(this)">
        <div class="station-icon">üíø</div>
        <div class="station-info">
          <div class="station-name">Blue Note Vault</div>
          <div class="station-desc">The legendary label</div>
        </div>
        <div class="freq-badge">98.7</div>
      </div>
      <div class="station-item" data-station="cinematic" onclick="switchStation(this)">
        <div class="station-icon">üé¨</div>
        <div class="station-info">
          <div class="station-name">Cinematic Jazz</div>
          <div class="station-desc">Film noir & scores</div>
        </div>
        <div class="freq-badge">100.9</div>
      </div>
      <div class="station-item" data-station="sampling" onclick="switchStation(this)">
        <div class="station-icon">üéß</div>
        <div class="station-info">
          <div class="station-name">Sampling Roots</div>
          <div class="station-desc">Jazz sampled in Hip Hop</div>
        </div>
        <div class="freq-badge">102.5</div>
      </div>
    </div>

  </div>

  <!-- CENTER: PLAYER -->
  <div class="player-panel">

    <!-- Tuning overlay -->
    <div class="tuning-overlay" id="tuningOverlay">
      <div class="tuning-static">SINTONIZANDO...</div>
      <div class="tuning-wave" id="tuningWave"></div>
      <div class="station-loading" id="tuningStation"></div>
    </div>

    <!-- Vinyl -->
    <div class="vinyl-container">
      <div class="vinyl-record" id="vinylRecord">
        <div class="vinyl-label" id="vinylLabel">
          <!-- Art Deco label color fill -->
          <div style="width:100%;height:100%;background:radial-gradient(circle, #c4780f 0%, #6a3808 100%);display:flex;align-items:center;justify-content:center;flex-direction:column;">
            <div style="font-family:'Bebas Neue',cursive;font-size:0.5rem;color:#f0e6c8;letter-spacing:0.1em;">DAJZ</div>
            <div style="width:20px;height:1px;background:#f0e6c8;margin:2px 0;opacity:0.4;"></div>
            <div style="font-family:'Courier Prime',monospace;font-size:0.32rem;color:#f0e6c8;opacity:0.6;letter-spacing:0.08em;">CLUB</div>
          </div>
        </div>
      </div>

      <!-- Tonearm SVG -->
      <svg class="tonearm" id="tonearm" viewBox="0 0 100 100">
        <g transform-origin="85 12">
          <line x1="85" y1="12" x2="25" y2="75" stroke="#888" stroke-width="2.5" stroke-linecap="round"/>
          <circle cx="85" cy="12" r="6" fill="#555" stroke="#777" stroke-width="1"/>
          <circle cx="22" cy="78" r="4" fill="#333" stroke="#888" stroke-width="1.5"/>
          <line x1="22" y1="78" x2="10" y2="90" stroke="#777" stroke-width="2" stroke-linecap="round"/>
          <circle cx="10" cy="90" r="2.5" fill="#c4780f" stroke="#e8941a" stroke-width="0.5"/>
        </g>
      </svg>
    </div>

    <!-- Now Playing -->
    <div class="now-playing-label">‚Äî Now Playing ‚Äî</div>
    <div class="track-title" id="trackTitle">Waltz for Debby</div>
    <div class="track-artist" id="trackArtist">Bill Evans Trio</div>
    <div class="track-year" id="trackYear">1961 ¬∑ Riverside Records ¬∑ New York City</div>

    <!-- Current Station Display -->
    <div class="current-station-display" id="currentStationDisplay">üìª Ivory Keys ‚Äî 88.1 FM</div>

    <!-- Progress (Radio mode ‚Äî just visual) -->
    <div class="progress-container">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill" style="width: 37%"></div>
      </div>
      <div class="time-display">
        <span id="timeElapsed">3:42</span>
        <span style="font-size:0.5rem;opacity:0.4;">‚ñ∫ RADIO ‚Äî no seeking</span>
        <span id="timeDuration">6:58</span>
      </div>
    </div>

    <!-- VU Meters -->
    <div class="vu-section">
      <div class="vu-meter">
        <div class="vu-label">L</div>
        <div class="vu-needle-container" id="vuLeft">
          <div class="vu-needle-bg"></div>
          <div class="vu-scale"></div>
          <div class="vu-needle" id="needleL"></div>
        </div>
      </div>
      <div class="amber-glow-dot"></div>
      <div class="vu-meter">
        <div class="vu-label">R</div>
        <div class="vu-needle-container" id="vuRight">
          <div class="vu-needle-bg"></div>
          <div class="vu-scale"></div>
          <div class="vu-needle" id="needleR"></div>
        </div>
      </div>
      <!-- Bar VU meter -->
      <div style="display:flex;flex-direction:column;gap:4px;margin-left:12px;">
        <div class="vu-bars" id="vuBarsL"></div>
        <div class="vu-bars" id="vuBarsR"></div>
      </div>
    </div>

    <!-- Visualizer Canvas -->
    <div class="visualizer-container">
      <canvas class="visualizer-canvas" id="visualizer" width="340" height="50"></canvas>
    </div>

    <!-- Crackle + Volume -->
    <div class="crackle-section">
      <div class="control-row">
        <span class="control-label">Volume</span>
        <input type="range" id="volumeSlider" min="0" max="100" value="80" oninput="setVolume(this.value)">
        <span style="font-family:'Courier Prime',monospace;font-size:0.6rem;color:var(--amber-dim);width:30px;text-align:right;" id="volDisplay">80</span>
      </div>
      <div class="control-row">
        <span class="control-label">Vinil</span>
        <input type="range" id="crackleSlider" min="0" max="100" value="30" oninput="setCrackle(this.value)">
        <span style="font-family:'Courier Prime',monospace;font-size:0.6rem;color:var(--amber-dim);width:30px;text-align:right;" id="crackleDisplay">30</span>
      </div>
    </div>

    <!-- Play button -->
    <div class="play-zone">
      <button class="play-btn" id="playBtn" onclick="togglePlay()">‚ñ∂</button>
    </div>

  </div>

  <!-- RIGHT: LINER NOTES -->
  <div class="liner-panel">
    <div class="liner-header">
      <div class="liner-header-title">‚óà Liner Notes & Curiosities</div>
    </div>

    <!-- Album details -->
    <div class="album-details">
      <div class="album-thumb" id="albumThumb"
        style="background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);display:flex;align-items:center;justify-content:center;font-size:1.8rem;">üéπ</div>
      <div class="album-text">
        <div class="album-name" id="albumName">Waltz for Debby</div>
        <div class="album-meta" id="albumMeta">
          Bill Evans Trio<br>
          Riverside Records, 1961<br>
          Gravado ao vivo no Village Vanguard
        </div>
      </div>
    </div>

    <hr class="liner-divider">

    <!-- Listeners -->
    <div class="listeners-row">
      <div class="listeners-dot"></div>
      <div class="listeners-text">Ouvindo agora ‚Äî Ivory Keys</div>
      <div class="listeners-count" id="listenersCount">247</div>
    </div>

    <!-- Facts cards -->
    <div id="factsContainer"></div>

  </div>
</div>

<!-- DIAL FOOTER -->
<div class="dial-footer">
  <div class="dial-wrapper">
    <div class="dial-needle"></div>
    <div class="dial-track" id="dialTrack"></div>
  </div>
  <div class="dial-controls">
    <button class="dial-btn" onclick="dialPrev()">‚óÄ PREV</button>
    <span style="font-family:'Courier Prime',monospace;font-size:0.6rem;color:var(--amber);letter-spacing:0.2em;" id="dialFreqDisplay">88.1 FM</span>
    <button class="dial-btn" onclick="dialNext()">NEXT ‚ñ∂</button>
  </div>
</div>

<script>
// ===== DATA =====
const stations = [
  { id:'ivory', name:'Ivory Keys', icon:'üéπ', freq:'88.1', group:'essentials',
    track:'Waltz for Debby', artist:'Bill Evans Trio', year:'1961 ¬∑ Riverside Records ¬∑ New York City',
    album:'Waltz for Debby', albumEmoji:'üéπ',
    facts:[
      { cat:'SOBRE A GRAVA√á√ÉO', text:'Gravado ao vivo no Village Vanguard, Nova York, em 25 de junho de 1961. O som ambiente dos clientes do clube, talheres e conversas ao fundo tornaram-se parte ic√¥nica do √°lbum.' },
      { cat:'SOBRE O ARTISTA', text:'Bill Evans revolucionou a harmonia do jazz com seu uso √∫nico de acordes suspensos e o conceito de "impressionismo musical". Seu toque delicado no piano influenciou praticamente todos os pianistas de jazz das d√©cadas seguintes.' },
      { cat:'CURIOSIDADE HIST√ìRICA', text:'Scott LaFaro, o contrabaixista do trio, faleceu em um acidente de carro apenas 10 dias ap√≥s esta grava√ß√£o. Este √°lbum tornou-se seu epit√°fio musical.' },
    ]
  },
  { id:'horn', name:'The Horn Section', icon:'üé∫', freq:'90.3', group:'essentials',
    track:'So What', artist:'Miles Davis', year:'1959 ¬∑ Columbia Records ¬∑ New York City',
    album:'Kind of Blue', albumEmoji:'üé∫',
    facts:[
      { cat:'SOBRE A FAIXA', text:'"So What" abre o √°lbum Kind of Blue com apenas dois acordes modais repetidos ‚Äî uma radicalidade que chocou o mundo do jazz em 1959 e inaugurou o jazz modal.' },
      { cat:'SOBRE O ARTISTA', text:'Miles Davis gravou Kind of Blue em apenas duas sess√µes, em mar√ßo e abril de 1959. Nenhuma das faixas foi ensaiada extensivamente ‚Äî Davis deu aos m√∫sicos esbo√ßos mel√≥dicos momentos antes de gravarem.' },
    ]
  },
  { id:'strings', name:'Deep Strings', icon:'üéª', freq:'92.7', group:'essentials',
    track:'Goodbye Pork Pie Hat', artist:'Charles Mingus', year:'1959 ¬∑ Columbia Records',
    album:'Mingus Ah Um', albumEmoji:'üéª',
    facts:[
      { cat:'SOBRE A COMPOSI√á√ÉO', text:'Mingus comp√¥s esta pe√ßa como homenagem a Lester Young, que faleceu no mesmo dia em que Mingus soube da not√≠cia. O chap√©u "pork pie" era marca registrada de Young.' },
      { cat:'SOBRE O ARTISTA', text:'Charles Mingus era conhecido por sua personalidade explosiva e por exigir perfei√ß√£o absoluta de seus m√∫sicos ‚Äî chegou a parar shows no meio para recome√ßar do zero.' },
    ]
  },
  { id:'bigband', name:'Big Band Era', icon:'üé∑', freq:'94.1', group:'essentials',
    track:'Take the A Train', artist:'Duke Ellington Orchestra', year:'1941 ¬∑ Victor Records',
    album:'Take the A Train', albumEmoji:'üé∑',
    facts:[
      { cat:'SOBRE A COMPOSI√á√ÉO', text:'"Take the A Train" foi escrita por Billy Strayhorn em 1939, ap√≥s Duke Ellington lhe dar instru√ß√µes de como chegar ao seu apartamento no Harlem de metr√¥. Tornou-se o tema oficial da orquestra.' },
    ]
  },
  { id:'vocal', name:'Vocal Standards', icon:'üéô', freq:'95.5', group:'essentials',
    track:"'Round Midnight", artist:'Billie Holiday', year:'1957 ¬∑ Verve Records',
    album:'Lady in Satin', albumEmoji:'üéô',
    facts:[
      { cat:'SOBRE A VOZ', text:'Billie Holiday desenvolveu um estilo √∫nico de atrasar levemente as notas em rela√ß√£o ao ritmo da banda ‚Äî uma t√©cnica que fazia cada frase soar como confid√™ncia sussurrada.' },
    ]
  },
  { id:'midnight', name:'Midnight Blue', icon:'üåô', freq:'107.1', group:'mood',
    track:'Blue in Green', artist:'Miles Davis & Bill Evans', year:'1959 ¬∑ Columbia Records',
    album:'Kind of Blue', albumEmoji:'üåô',
    facts:[
      { cat:'VIBE DA ESTA√á√ÉO', text:'Esta esta√ß√£o foi curada para as horas mais silenciosas da madrugada. Cada faixa foi selecionada pela sua capacidade de transformar solid√£o em contempla√ß√£o.' },
      { cat:'SOBRE A FAIXA', text:'"Blue in Green" √© uma das composi√ß√µes mais debatidas do jazz ‚Äî tanto Miles Davis quanto Bill Evans reivindicaram sua autoria. A disputa nunca foi resolvida em vida de ambos.' },
    ]
  },
  { id:'bossa', name:'Bossa & Beyond', icon:'üå¥', freq:'96.5', group:'special',
    track:'Garota de Ipanema', artist:'Jo√£o Gilberto & Stan Getz', year:'1963 ¬∑ Verve Records ¬∑ Rio de Janeiro',
    album:'Getz/Gilberto', albumEmoji:'üå¥',
    facts:[
      { cat:'ENCONTRO DE CULTURAS', text:'Getz/Gilberto foi gravado em apenas dois dias no Rio de Janeiro, em mar√ßo de 1963. O √°lbum ganhou o Grammy de √Ålbum do Ano ‚Äî o primeiro √°lbum brasileiro a receber esta honra.' },
      { cat:'CURIOSIDADE', text:'A voz na grava√ß√£o original de "Garota de Ipanema" √© de Astrud Gilberto, esposa de Jo√£o. Era sua primeira grava√ß√£o profissional ‚Äî ela foi inclu√≠da apenas porque falava ingl√™s.' },
    ]
  },
  { id:'bebop', name:'Bebop Revolution', icon:'‚ö°', freq:'99.1', group:'time',
    track:"Ko-Ko", artist:'Charlie Parker', year:'1945 ¬∑ Savoy Records ¬∑ New York City',
    album:'Ko-Ko', albumEmoji:'‚ö°',
    facts:[
      { cat:'A REVOLU√á√ÉO', text:'O bebop nasceu como rea√ß√£o ao jazz comercial e √†s big bands. Parker e Dizzy Gillespie criaram um vocabul√°rio musical t√£o complexo que tornava imposs√≠vel para m√∫sicos n√£o preparados improvisar junto.' },
      { cat:'SOBRE CHARLIE PARKER', text:'"Bird" Parker conseguia tocar com velocidade e precis√£o imposs√≠veis para a maioria dos m√∫sicos. Dizem que em jam sessions, ele deliberadamente tocava em tempos absurdamente r√°pidos para "assustar" m√∫sicos med√≠ocres.' },
    ]
  },
  { id:'bluenote', name:'Blue Note Vault', icon:'üíø', freq:'98.7', group:'special',
    track:'Moanin', artist:"Art Blakey & The Jazz Messengers", year:'1958 ¬∑ Blue Note Records',
    album:"Moanin'", albumEmoji:'üíø',
    facts:[
      { cat:'O SELO LEND√ÅRIO', text:'A Blue Note Records, fundada em 1939 por Alfred Lion e Francis Wolff, dois refugiados judeus alem√£es, tornou-se o mais importante selo de jazz da hist√≥ria ‚Äî definindo a est√©tica sonora e visual do hard bop.' },
      { cat:'FOTOGRAFIA IC√îNICA', text:'Francis Wolff fotografava todas as sess√µes de grava√ß√£o na Blue Note. Seu arquivo de mais de 20.000 fotografias criou a identidade visual que define o jazz at√© hoje.' },
    ]
  },
  { id:'cinematic', name:'Cinematic Jazz', icon:'üé¨', freq:'100.9', group:'special',
    track:"Ascenseur pour l'√©chafaud", artist:"Miles Davis", year:'1958 ¬∑ Fontana Records ¬∑ Paris',
    album:"Ascenseur pour l'√©chafaud", albumEmoji:'üé¨',
    facts:[
      { cat:'A SESS√ÉO HIST√ìRICA', text:'Miles Davis improvisou toda a trilha sonora do filme de Louis Malle em uma √∫nica noite, de 4 para 5 de dezembro de 1957, em Paris. Ele assistia √†s cenas projetadas na parede e tocava ao vivo.' },
      { cat:'O JAZZ NOIR', text:'Esta grava√ß√£o definiu o som do cinema noir europeu e influenciou gera√ß√µes de compositores de trilhas sonoras ‚Äî de John Barry a Lalo Schifrin.' },
    ]
  },
  { id:'sampling', name:'Sampling Roots', icon:'üéß', freq:'102.5', group:'special',
    track:'The Sidewinder', artist:'Lee Morgan', year:'1963 ¬∑ Blue Note Records',
    album:'The Sidewinder', albumEmoji:'üéß',
    facts:[
      { cat:'DO JAZZ AO HIP HOP', text:'"The Sidewinder" foi sampleado por A Tribe Called Quest, Pete Rock, Jay-Z e dezenas de outros produtores de hip hop. O groove funk desta faixa antecipou o breakbeat que definiria o rap.' },
      { cat:'CONEX√ÉO', text:'Esta esta√ß√£o celebra o fato de que o jazz √© o DNA do hip hop. Sem Coltrane, sem Wu-Tang. Sem Mingus, sem Kendrick. A linha √© direta e profunda.' },
    ]
  },
];

let currentStationIndex = 0;
let isPlaying = false;
let audioCtx = null;
let crackleNode = null;
let crackleGain = null;
let masterGain = null;
let progressInterval = null;
let progressSeconds = 222; // 3:42
let totalSeconds = 418; // 6:58
let vuInterval = null;
let listenersInterval = null;
let visAnimId = null;

// ===== AUDIO SETUP =====
function initAudio() {
  if (audioCtx) return;
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  masterGain = audioCtx.createGain();
  masterGain.gain.value = 0.8;
  masterGain.connect(audioCtx.destination);

  // Crackle: brown noise
  crackleGain = audioCtx.createGain();
  crackleGain.gain.value = 0;
  crackleGain.connect(masterGain);

  startCrackle();
}

function startCrackle() {
  const bufferSize = audioCtx.sampleRate * 3;
  const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
  const data = buffer.getChannelData(0);

  // Generate pink/brown noise with pops
  let lastOut = 0;
  for (let i = 0; i < bufferSize; i++) {
    const white = Math.random() * 2 - 1;
    // Brown noise
    lastOut = (lastOut + (0.02 * white)) / 1.02;
    data[i] = lastOut * 3.5;
    // Random crackle pops
    if (Math.random() < 0.0003) {
      data[i] += (Math.random() > 0.5 ? 1 : -1) * (0.3 + Math.random() * 0.7);
      // Small pop tail
      for (let j = 1; j < 8 && i+j < bufferSize; j++) {
        data[i+j] += data[i] * Math.pow(0.5, j);
      }
    }
  }

  crackleNode = audioCtx.createBufferSource();
  crackleNode.buffer = buffer;
  crackleNode.loop = true;

  // Low-pass filter for warmth
  const lpf = audioCtx.createBiquadFilter();
  lpf.type = 'lowpass';
  lpf.frequency.value = 4000;

  crackleNode.connect(lpf);
  lpf.connect(crackleGain);
  crackleNode.start();
}

function setCrackle(val) {
  document.getElementById('crackleDisplay').textContent = val;
  if (!audioCtx) return;
  crackleGain.gain.setTargetAtTime(val / 100 * 0.12, audioCtx.currentTime, 0.1);
}

function setVolume(val) {
  document.getElementById('volDisplay').textContent = val;
  if (!audioCtx) return;
  masterGain.gain.setTargetAtTime(val / 100, audioCtx.currentTime, 0.1);
}

// Needle drop sound
function playNeedleDrop() {
  if (!audioCtx) return;
  const osc = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  osc.connect(g); g.connect(masterGain);
  osc.frequency.setValueAtTime(800, audioCtx.currentTime);
  osc.frequency.exponentialRampToValueAtTime(200, audioCtx.currentTime + 0.15);
  g.gain.setValueAtTime(0.3, audioCtx.currentTime);
  g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);
  osc.start(audioCtx.currentTime);
  osc.stop(audioCtx.currentTime + 0.3);
}

// Static noise burst on station change
function playStaticBurst() {
  if (!audioCtx) return;
  const bufferSize = audioCtx.sampleRate * 1.5;
  const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
  const data = buffer.getChannelData(0);
  for (let i = 0; i < bufferSize; i++) {
    data[i] = Math.random() * 2 - 1;
  }
  const node = audioCtx.createBufferSource();
  node.buffer = buffer;
  const g = audioCtx.createGain();
  const hpf = audioCtx.createBiquadFilter();
  hpf.type = 'bandpass';
  hpf.frequency.value = 3000;
  node.connect(hpf); hpf.connect(g); g.connect(masterGain);
  g.gain.setValueAtTime(0.15, audioCtx.currentTime);
  g.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 1.2);
  node.start();
}

// ===== PLAY/PAUSE =====
function togglePlay() {
  if (!audioCtx) initAudio();
  isPlaying = !isPlaying;

  const vinyl = document.getElementById('vinylRecord');
  const playBtn = document.getElementById('playBtn');

  if (isPlaying) {
    vinyl.classList.add('playing');
    playBtn.textContent = '‚è∏';
    if (audioCtx.state === 'suspended') audioCtx.resume();
    startProgress();
    startVU();
    startVisualizer();
    playNeedleDrop();
    setCrackle(document.getElementById('crackleSlider').value);
  } else {
    vinyl.classList.remove('playing');
    playBtn.textContent = '‚ñ∂';
    clearInterval(progressInterval);
    clearInterval(vuInterval);
    cancelAnimationFrame(visAnimId);
    if (audioCtx) crackleGain.gain.setTargetAtTime(0, audioCtx.currentTime, 0.3);
  }
}

// ===== PROGRESS =====
function startProgress() {
  clearInterval(progressInterval);
  progressInterval = setInterval(() => {
    progressSeconds++;
    if (progressSeconds >= totalSeconds) progressSeconds = 0;
    const pct = (progressSeconds / totalSeconds) * 100;
    document.getElementById('progressFill').style.width = pct + '%';
    document.getElementById('timeElapsed').textContent = formatTime(progressSeconds);
  }, 1000);
}

function formatTime(s) {
  return Math.floor(s/60) + ':' + String(s%60).padStart(2,'0');
}

// ===== VU METERS =====
function startVU() {
  clearInterval(vuInterval);
  let phase = 0;
  vuInterval = setInterval(() => {
    phase += 0.15;
    const baseL = 0.5 + 0.4 * Math.sin(phase) + 0.1 * Math.random();
    const baseR = 0.5 + 0.4 * Math.sin(phase + 0.8) + 0.1 * Math.random();

    // Needle rotation: -30 to +30 deg
    const rotL = -30 + baseL * 60;
    const rotR = -30 + baseR * 60;
    document.getElementById('needleL').style.transform = `rotate(${rotL}deg) translateX(-50%)`;
    document.getElementById('needleR').style.transform = `rotate(${rotR}deg) translateX(-50%)`;

    // Bar VU
    updateBars('vuBarsL', baseL);
    updateBars('vuBarsR', baseR);
  }, 80);
}

function updateBars(id, level) {
  const container = document.getElementById(id);
  const bars = container.querySelectorAll('.vu-bar');
  const total = bars.length;
  const active = Math.floor(level * total);
  bars.forEach((bar, i) => {
    if (i < active) {
      bar.style.height = (8 + Math.random() * 4) + 'px';
    } else {
      bar.style.height = '3px';
    }
  });
}

// ===== VISUALIZER =====
function startVisualizer() {
  const canvas = document.getElementById('visualizer');
  const ctx = canvas.getContext('2d');
  let t = 0;

  function draw() {
    if (!isPlaying) return;
    visAnimId = requestAnimationFrame(draw);
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const w = canvas.width, h = canvas.height;
    ctx.strokeStyle = 'rgba(232,148,26,0.6)';
    ctx.lineWidth = 1.5;
    ctx.shadowColor = 'rgba(232,148,26,0.4)';
    ctx.shadowBlur = 4;
    ctx.beginPath();

    for (let x = 0; x < w; x++) {
      const freq = x / w;
      const y = h/2 +
        Math.sin(t * 2.1 + freq * 18) * (h * 0.18) +
        Math.sin(t * 3.7 + freq * 9) * (h * 0.1) +
        Math.sin(t * 1.3 + freq * 30) * (h * 0.06) +
        (Math.random() - 0.5) * 3;
      if (x === 0) ctx.moveTo(x, y);
      else ctx.lineTo(x, y);
    }
    ctx.stroke();
    t += 0.04;
  }
  draw();
}

// ===== STATION SWITCH =====
function switchStation(el) {
  const stationId = el.dataset.station;
  const idx = stations.findIndex(s => s.id === stationId);
  if (idx === currentStationIndex) return;

  if (!audioCtx) initAudio();
  else if (audioCtx.state === 'suspended') audioCtx.resume();

  // Show tuning overlay
  const overlay = document.getElementById('tuningOverlay');
  document.getElementById('tuningStation').textContent = el.querySelector('.station-name').textContent;
  overlay.classList.add('active');

  // Static burst
  playStaticBurst();

  // Stop vinyl
  const vinyl = document.getElementById('vinylRecord');
  vinyl.classList.remove('playing');

  setTimeout(() => {
    currentStationIndex = idx;
    updatePlayerUI(stations[idx]);
    overlay.classList.remove('active');

    if (isPlaying) {
      vinyl.classList.add('playing');
      playNeedleDrop();
    }

    // Sync dial
    scrollDialTo(idx);
  }, 1600);

  // Update station list
  document.querySelectorAll('.station-item').forEach(s => s.classList.remove('active'));
  el.classList.add('active');
}

function updatePlayerUI(s) {
  document.getElementById('trackTitle').textContent = s.track;
  document.getElementById('trackArtist').textContent = s.artist;
  document.getElementById('trackYear').textContent = s.year;
  document.getElementById('currentStationDisplay').textContent = `üìª ${s.name} ‚Äî ${s.freq} FM`;
  document.getElementById('albumName').textContent = s.album;
  document.getElementById('albumThumb').textContent = s.albumEmoji;
  document.getElementById('albumMeta').innerHTML = `${s.artist}<br>${s.year}`;

  // Reset progress
  progressSeconds = Math.floor(Math.random() * 180);
  totalSeconds = 240 + Math.floor(Math.random() * 240);
  document.getElementById('timeDuration').textContent = formatTime(totalSeconds);
  document.getElementById('timeElapsed').textContent = formatTime(progressSeconds);

  // Update dial freq display
  document.getElementById('dialFreqDisplay').textContent = s.freq + ' FM';

  // Render facts
  renderFacts(s.facts);

  // Update listeners
  updateListeners(s);
}

function renderFacts(facts) {
  const container = document.getElementById('factsContainer');
  container.innerHTML = '';
  facts.forEach((f, i) => {
    const card = document.createElement('div');
    card.className = 'liner-card';
    card.style.animationDelay = (i * 0.15) + 's';
    card.innerHTML = `
      <div class="tape-strip"></div>
      <div class="fact-category">${f.cat}</div>
      <div class="fact-text typewriter" id="fact-${i}"></div>
      <div class="fact-source">‚Äî DAJZ.CLUB Archive</div>
    `;
    container.appendChild(card);

    // Typewriter effect
    typeWriter(`fact-${i}`, f.text, i * 600);
  });
}

function typeWriter(id, text, delay) {
  setTimeout(() => {
    const el = document.getElementById(id);
    if (!el) return;
    let i = 0;
    const interval = setInterval(() => {
      if (i < text.length) {
        el.textContent += text[i];
        i++;
      } else {
        el.classList.remove('typewriter');
        clearInterval(interval);
      }
    }, 18);
  }, delay);
}

function updateListeners(s) {
  const base = 80 + stations.indexOf(s) * 27 + Math.floor(Math.random() * 50);
  document.getElementById('listenersCount').textContent = base;
  document.querySelector('.listeners-text').textContent = `Ouvindo agora ‚Äî ${s.name}`;
}

// ===== CLOCK =====
function updateClock() {
  const now = new Date();
  const h = String(now.getHours()).padStart(2,'0');
  const m = String(now.getMinutes()).padStart(2,'0');
  const s = String(now.getSeconds()).padStart(2,'0');
  document.getElementById('clock').textContent = `${h}:${m}:${s}`;
}
setInterval(updateClock, 1000);
updateClock();

// ===== DIAL =====
function buildDial() {
  const track = document.getElementById('dialTrack');
  track.innerHTML = '';
  stations.forEach((s, i) => {
    const div = document.createElement('div');
    div.className = 'dial-station' + (i === 0 ? ' active' : '');
    div.dataset.index = i;
    div.onclick = () => {
      const el = document.querySelectorAll('.station-item')[i];
      if (el) switchStation(el);
    };
    div.innerHTML = `<div class="dial-station-name">${s.icon} ${s.name}</div><div class="dial-freq">${s.freq} FM</div>`;
    track.appendChild(div);
  });
}

function scrollDialTo(idx) {
  const track = document.getElementById('dialTrack');
  const stationWidth = 120;
  const offset = -(idx * stationWidth) + (track.parentElement.offsetWidth / 2) - 60;
  track.style.transform = `translateX(${offset}px)`;

  document.querySelectorAll('.dial-station').forEach((el, i) => {
    el.classList.toggle('active', i === idx);
  });
  document.getElementById('dialFreqDisplay').textContent = stations[idx].freq + ' FM';
}

function dialNext() {
  if (currentStationIndex < stations.length - 1) {
    const nextEl = document.querySelectorAll('.station-item')[currentStationIndex + 1];
    if (nextEl) switchStation(nextEl);
  }
}

function dialPrev() {
  if (currentStationIndex > 0) {
    const prevEl = document.querySelectorAll('.station-item')[currentStationIndex - 1];
    if (prevEl) switchStation(prevEl);
  }
}

// ===== VU BARS INIT =====
function initVUBars() {
  ['vuBarsL', 'vuBarsR'].forEach(id => {
    const container = document.getElementById(id);
    for (let i = 0; i < 12; i++) {
      const bar = document.createElement('div');
      bar.className = 'vu-bar ' + (i < 7 ? 'green' : i < 10 ? 'amber' : 'red');
      bar.style.height = '3px';
      container.appendChild(bar);
    }
  });
}

// ===== TUNING WAVE INIT =====
function initTuningWave() {
  const wave = document.getElementById('tuningWave');
  for (let i = 0; i < 20; i++) {
    const s = document.createElement('span');
    s.style.setProperty('--i', i);
    wave.appendChild(s);
  }
}

// ===== LISTENERS FLUCTUATION =====
function startListenersFluctuation() {
  listenersInterval = setInterval(() => {
    const el = document.getElementById('listenersCount');
    const current = parseInt(el.textContent) || 100;
    const delta = Math.floor(Math.random() * 7) - 3;
    el.textContent = Math.max(10, current + delta);
  }, 4000);
}

// ===== INIT =====
buildDial();
initVUBars();
initTuningWave();
scrollDialTo(0);
renderFacts(stations[0].facts);
updateListeners(stations[0]);
startListenersFluctuation();

// Auto-advance progress bar (visual demo even before clicking play)
setTimeout(() => {
  startProgress();
}, 500);

// Listeners: fluctuate
let tickCount = 0;

// Drag dial
let isDragging = false;
let dragStartX = 0;
let dragStartTransform = 0;

const dialTrack = document.getElementById('dialTrack');

dialTrack.addEventListener('mousedown', e => {
  isDragging = true;
  dragStartX = e.clientX;
  const m = dialTrack.style.transform.match(/-?\d+/);
  dragStartTransform = m ? parseInt(m[0]) : 0;
  e.preventDefault();
});

document.addEventListener('mousemove', e => {
  if (!isDragging) return;
  const dx = e.clientX - dragStartX;
  const newX = dragStartTransform + dx;
  dialTrack.style.transform = `translateX(${newX}px)`;
});

document.addEventListener('mouseup', e => {
  if (!isDragging) return;
  isDragging = false;
  // Snap to nearest
  const m = dialTrack.style.transform.match(/-?\d+/);
  const currentX = m ? parseInt(m[0]) : 0;
  const center = dialTrack.parentElement.offsetWidth / 2 - 60;
  const idx = Math.round((center - currentX) / 120);
  const clampedIdx = Math.max(0, Math.min(stations.length - 1, idx));
  const targetEl = document.querySelectorAll('.station-item')[clampedIdx];
  if (targetEl && clampedIdx !== currentStationIndex) {
    switchStation(targetEl);
  } else {
    scrollDialTo(currentStationIndex);
  }
});
</script>
</body>
</html>